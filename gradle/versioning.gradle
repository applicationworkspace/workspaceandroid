def INITIAL_VERSION = 52

ext {
    appSetup = [
            majorVersion: 1,   // 1..âˆž
            minorVersion: 0,    // 0..99
            patchVersion: 0     // 0..999
    ]

    calculateVersionCode = {
//        def code = System.getenv("PIPELINE_RUN_NUMBER")
        def pipelineRunId = System.getenv("CIRCLE_BUILD_NUM")
//        return (appSetup.majorVersion * 100000)
//                .plus(appSetup.minorVersion * 10000)
//                .plus(appSetup.patchVersion * 1000)
//                .plus((code != null && !code.isEmpty()) ? code.toInteger() : DEFAULT_PIPELINE_RUN_ID)
//        return (code != null && !code.isEmpty()) ? code.toInteger() : DEFAULT_PIPELINE_RUN_NUMBER
        def major = appSetup.majorVersion as int
        def minor = appSetup.minorVersion as int
        def patch = appSetup.patchVersion as int
        return (major * 100 + minor) * 1000 + patch
    }

    calculateVersionName = { "${appSetup.majorVersion}.${appSetup.minorVersion}.${appSetup.patchVersion}" }
}

//// Circle ci BUILD_NUM
//static def getBuildVersion() {
//    def version = 32
//    def buildNumber = System.getenv("CIRCLE_BUILD_NUM")
//    if (buildNumber != null) {
//        version += buildNumber as int
//    }
//    println("VersionCode: " + version)
//    return version
//}